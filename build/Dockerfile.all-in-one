FROM ubuntu:18.04 
WORKDIR /
RUN apt-get update && apt install -y iproute2 lsof net-tools \
tcpdump python3 python3-gst-1.0 libgstrtspserver-1.0-dev \
gstreamer1.0-rtsp gstreamer1.0-plugins-ugly
COPY onvif_srvd /
COPY wsdd /
COPY rtsp-feed.py /
COPY start.sh /
# TODO add discovery tool from https://github.com/lumeohq/onvif-rs helpful for debugging
# COPY  discovery /discovery
RUN chmod +x onvif_srvd wsdd start.sh rtsp-feed.py
ENTRYPOINT [ "sh", "start.sh" ]
